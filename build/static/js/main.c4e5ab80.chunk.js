(this.webpackJsonpgoals=this.webpackJsonpgoals||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(21),a=n.n(c),s=n(12),o=n(43),i=n(73),u=n(72),l=n(4),j=n.n(l),d=n(8),h=n(2),b=n(19),p=n.n(b),O="/api/cards",f=null,v=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,p.a.post(O,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={getAll:v,create:x,update:function(e,t){return p.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},del:function(e){return p.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},setToken:function(e){f="bearer ".concat(e)}};function g(){window.location.reload()}var w=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.create(e);case 2:r=t.sent,n({type:"NEW_CARD",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(r){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.update(e,t);case 2:c=n.sent,r({type:"NOTE",id:e,data:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_CARD":return e.concat(t.data);case"INIT_CARDS":return t.data;case"DELETE":return g();case"NOTE":var n=t.id,r=e.find((function(e){return e.id===n})),c=Object(h.a)(Object(h.a)({},r),{},{notes:r.notes.concat(t.note)});return e.map((function(e){return e.id!==n?e:c}));default:return e}},S=function(e){return console.log("kokeilen userinfoa: ",e.token),{type:"SET_USER",data:e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?t.data:e},T=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"LOGIN",user:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("LOGIN"===t.type){if(null===t.user)return null;var n=t.user;return n}return e},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_CARD"===t.type?t.data:e},A="/api/messages",C=null,M=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(A);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},console.log("Testi taas",C),e.next=4,p.a.post(A,t,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R={getAll:M,create:I,del:function(e){return p.a.delete("".concat(A,"/").concat(e)).then((function(e){return e.data}))},setToken:function(e){C="bearer ".concat(e)}};function L(){window.location.reload()}var _=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.create(e);case 2:r=t.sent,n({type:"NEW_MESSAGE",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MESSAGE":return e.concat(t.data);case"SET_MESSAGES":return t.data;case"DELETE":return L();default:return e}},W=Object(o.combineReducers)({cards:k,card:D,userInfo:E,login:N,messages:U}),H=Object(o.createStore)(W,Object(u.composeWithDevTools)(Object(o.applyMiddleware)(i.a))),P=n(3),G=n(1),F=function(e){var t=e.goalTime-(new Date).getTime(),n=t/1e3,c=Math.abs(n)/86400,a=Math.floor(c),s=86400*(c-a)/3600,o=Math.floor(s),i=3600*(s-o)/60,u=Math.floor(i),l=60*(i-u),j=Math.floor(l),d=Object(r.useState)(t),h=Object(P.a)(d,2),b=(h[0],h[1]),p=Object(r.useState)(!0),O=Object(P.a)(p,2),f=O[0];O[1];return Object(r.useEffect)((function(){var e;return f?e=setInterval((function(){b((function(e){return e+1e3}))}),1e3):f||clearInterval(e),function(){return clearInterval(e)}}),[f]),Object(G.jsx)("div",{className:"stopwatch",children:Object(G.jsxs)("div",{className:"numbers",children:[Object(G.jsx)("div",{children:"Days: "+a}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{children:"Hours: "+o}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{children:"Minutes: "+u}),Object(G.jsx)("hr",{}),Object(G.jsx)("div",{children:"Seconds: "+j}),Object(G.jsx)("hr",{})]})})},J=function(e){var t=e.goal,n=Object(s.b)(),c=Object(r.useState)(""),a=Object(P.a)(c,2),o=a[0],i=a[1],u=t.date,l=(u-(new Date).getTime())/1e3,h=Math.abs(l)/86400,b=Math.floor(h),p=function(e){console.log("Toimii t\xe4h\xe4n: ",e),n(function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.del(e);case 2:n({type:"DELETE"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},O=function(){var e=Object(d.a)(j.a.mark((function e(r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),a="Day "+b+": "+o,(c=t).notes=c.notes.concat(a),n(y(t.id,c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=t.notes;return console.log("Testarray: ",f),Object(G.jsxs)("div",{className:"card",children:[Object(G.jsx)("h1",{children:t.name}),Object(G.jsx)("hr",{}),Object(G.jsx)(F,{goalTime:u}),Object(G.jsxs)("form",{onSubmit:O,children:[Object(G.jsx)("input",{value:o,onChange:function(e){i(e.target.value)}}),Object(G.jsx)("button",{type:"submit",children:"Add note"})]}),Object(G.jsx)("h3",{children:"Updates:"}),t.notes.map((function(e){return Object(G.jsx)("p",{children:e})})),Object(G.jsx)("button",{onClick:function(){return p(t.id)},children:"Delete"})]})},Y=function(e){var t=e.userName,n=Object(s.c)((function(e){return e.cards}));return Object(G.jsx)("div",{children:n.map((function(e){if(e.owner===t)return Object(G.jsx)(J,{goal:e},e.id)}))})},z=function(e){var t=e.user,n=Object(s.b)(),r=function(){var e=Object(d.a)(j.a.mark((function e(r){var c,a,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),c=r.target.card.value,(1e5*Math.random()).toFixed(0),a=[],s=(new Date).getTime(),o=t,console.log("CARDFORM: ",s),r.target.card.value="",i={name:c,count:0,date:s,owner:o,notes:a},console.log("Hejhej: ",c,o),n(w(i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)("h2",{children:"create new"}),Object(G.jsxs)("form",{onSubmit:r,children:[Object(G.jsx)("div",{children:Object(G.jsx)("input",{name:"card"})}),Object(G.jsx)("button",{type:"submit",children:"create card"})]})]})},B=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,console.log("Login success I think: ",n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={login:B},q=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={createNew:q},V=function(){var e=Object(r.useState)(""),t=Object(P.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(P.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(""),h=Object(P.a)(l,2),b=h[0],p=h[1],O=Object(r.useState)(""),f=Object(P.a)(O,2),v=f[0],x=f[1],g=Object(r.useState)(""),w=Object(P.a)(g,2),y=w[0],k=w[1],E=Object(r.useState)(null),N=Object(P.a)(E,2),D=(N[0],N[1]),A=Object(r.useState)(null),C=Object(P.a)(A,2),M=C[0],I=C[1],R=Object(r.useState)(!1),L=Object(P.a)(R,2),_=L[0],U=L[1],W=Object(r.useState)(!1),H=Object(P.a)(W,2),F=H[0],J=H[1],Y=Object(s.b)(),z=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,K.login({username:n,password:i});case 4:r=e.sent,m.setToken(r.token),window.localStorage.setItem("loggedPlantappUser",JSON.stringify(r)),D(r),c(""),u(""),console.log("Kokeilen user dataa: ",r),Y(T(r)),Y(S(r)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),I("Wrong credentials"),setTimeout((function(){I(null)}),5e3);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=b,r=v,c=y,e.prev=4,e.next=7,Q.createNew({username:n,name:r,password:c});case 7:a=e.sent,console.log("Registered ",a),I("Your account has been registered!"),setTimeout((function(){I(null)}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),I("Something went wrong!"),setTimeout((function(){I(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{className:"login",children:[Object(G.jsx)("h2",{children:"Login"}),function(){var e={display:_?"none":""},t={display:_?"":"none"},r={display:F?"none":""},a={display:F?"":"none"};return Object(G.jsxs)("div",{className:"loginform",children:[Object(G.jsx)("div",{style:e,children:Object(G.jsx)("button",{onClick:function(){return U(!0)},children:"log in"})}),Object(G.jsxs)("div",{style:t,children:[Object(G.jsxs)("form",{onSubmit:z,children:[Object(G.jsxs)("div",{children:["username",Object(G.jsx)("input",{type:"text",value:n,name:"Username",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(G.jsxs)("div",{children:["password",Object(G.jsx)("input",{type:"password",value:i,name:"Password",onChange:function(e){var t=e.target;return u(t.value)}})]}),Object(G.jsx)("button",{type:"submit",children:"login"})]}),Object(G.jsx)("button",{onClick:function(){return U(!1)},children:"cancel"})]}),Object(G.jsx)("div",{style:r,children:Object(G.jsx)("button",{onClick:function(){return J(!0)},children:"Create account"})}),Object(G.jsxs)("div",{style:a,children:[Object(G.jsxs)("form",{onSubmit:B,children:[Object(G.jsxs)("div",{children:["username",Object(G.jsx)("input",{type:"text",value:b,name:"Username",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(G.jsxs)("div",{children:["name",Object(G.jsx)("input",{type:"text",value:v,name:"Name",onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(G.jsxs)("div",{children:["password",Object(G.jsx)("input",{type:"password",value:y,name:"Passwd",onChange:function(e){var t=e.target;return k(t.value)}})]}),Object(G.jsx)("button",{type:"submit",children:"Register"})]}),Object(G.jsx)("button",{onClick:function(){return J(!1)},children:"cancel"})]})]})}()]}),Object(G.jsx)("p",{children:M}),Object(G.jsx)("br",{})]})},X=function(){return Object(G.jsxs)("div",{children:[Object(G.jsx)("h2",{children:"Welcome to plant timer"}),Object(G.jsx)("p",{children:"The purpose of this app is to take time of your plants while they are growing. You can write updates to your plants and publish them."})]})},Z=function(e){var t=e.user,n=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.clear(),window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:"logout",children:[Object(G.jsxs)("p",{children:[t," logged-in"]}),Object(G.jsx)("button",{onClick:n,children:"Log out"})]})},$=function(e){var t=e.goal,n=(Object(s.b)(),Object(r.useState)("")),c=Object(P.a)(n,2),a=(c[0],c[1],(t.date-(new Date).getTime())/1e3),o=Math.abs(a)/86400,i=Math.floor(o),u=t.notes;return console.log("Testarray: ",u),Object(G.jsxs)("div",{className:"card",children:[Object(G.jsx)("h1",{children:t.name}),Object(G.jsxs)("p",{children:["Owner: ",t.owner]}),Object(G.jsx)("hr",{}),Object(G.jsxs)("h2",{children:["Time: ",i," days"]}),Object(G.jsx)("h3",{children:"Updates:"}),t.notes.map((function(e){return Object(G.jsx)("p",{children:e})}))]})},ee=function(){var e=Object(s.c)((function(e){return e.cards}));return Object(G.jsxs)("div",{children:[Object(G.jsx)("h2",{children:"Highscores"}),Object(G.jsx)("p",{children:"Oldest plants in the PlantApp history."}),e.map((function(e,t){return Object(G.jsxs)("div",{children:[Object(G.jsx)("hr",{}),Object(G.jsxs)("p",{children:["Rank. ",t+1]}),Object(G.jsx)($,{goal:e},e.id)]})}))]})},te=n(119),ne=n(120),re=n(118),ce=n(34),ae=function(){return Object(G.jsx)("div",{className:"App",children:Object(G.jsxs)(te.a,{collapseOnSelect:!0,expand:"xl",bg:"dark",variant:"dark",children:[Object(G.jsx)(te.a.Brand,{href:"#home",children:"Plant timer"}),Object(G.jsx)(te.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(G.jsxs)(te.a.Collapse,{id:"responsive-navbar-nav",children:[Object(G.jsxs)(ne.a,{className:"mr-auto",children:[Object(G.jsx)(ce.b,{to:"/about",children:Object(G.jsx)(ne.a.Link,{href:"#about",children:"About"})}),Object(G.jsx)(ce.b,{to:"/highscores",children:Object(G.jsx)(ne.a.Link,{href:"#highscores",children:"Highscores"})}),Object(G.jsxs)(re.a,{title:"YEET",id:"collasible-nav-dropdown",children:[Object(G.jsx)(re.a.Item,{href:"#action/3.1",children:"Action"}),Object(G.jsx)(re.a.Item,{href:"#action/3.2",children:"Another action"}),Object(G.jsx)(re.a.Item,{href:"#action/3.3",children:"Something"}),Object(G.jsx)(re.a.Divider,{}),Object(G.jsx)(re.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(G.jsxs)(ne.a,{children:[Object(G.jsx)(ce.b,{to:"/chat",children:Object(G.jsx)(ne.a.Link,{href:"#chat",children:"Chat with others"})}),Object(G.jsx)(ce.b,{to:"/myplants",children:Object(G.jsx)(ne.a.Link,{eventKey:2,href:"#myplants",children:"My plants"})})]})]})]})})},se=n(13),oe=function(){var e=Object(s.c)((function(e){var t=e.userInfo;return console.log("HEj user h\xe4r i app:",t),t}));return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"My plants"}),Object(G.jsxs)("div",{children:[Object(G.jsx)(z,{user:e.name}),Object(G.jsx)(Y,{userName:e.name})]})]})},ie=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){var t=e.userInfo;return console.log("HEj user h\xe4r i app:",t),t})),n=Object(s.c)((function(e){var t=e.messages;return console.log("Messages:",t),t})),c=Object(r.useState)(""),a=Object(P.a)(c,2),o=a[0],i=a[1],u=["hej"],l=function(){var n=Object(d.a)(j.a.mark((function n(r){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),u.concat(o),console.log("UROb h\xe4r: ",t.username),R.setToken(t.token),c={content:o,username:t.username},console.log("TEsti: ",c),e(_(c));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{className:"chatHeader",children:"Chat with other users"}),Object(G.jsx)("div",{className:"parentDiv",children:n.map((function(e){return Object(G.jsxs)("div",{children:[Object(G.jsx)("h3",{children:e.username}),Object(G.jsx)("p",{children:e.content})]})}))}),null===t?Object(G.jsx)("p",{className:"addMesForm",children:"Log in to send messages!"}):Object(G.jsxs)("form",{onSubmit:l,className:"addMesForm",children:[Object(G.jsx)("input",{value:o,onChange:function(e){i(e.target.value)}}),Object(G.jsx)("button",{type:"submit",children:"Send"})]})]})},ue=function(){var e=Object(r.useState)(""),t=Object(P.a)(e,2),n=(t[0],t[1],Object(s.b)());Object(r.useEffect)((function(){n(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getAll();case 2:n=e.sent,console.log(n),t({type:"INIT_CARDS",data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getAll();case 2:n=e.sent,console.log("MessageReducer: ",n),t({type:"SET_MESSAGES",data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedPlantappUser");if(e){var t=JSON.parse(e);n(S(t)),m.setToken(t.token)}}),[n]);var c=Object(s.c)((function(e){return e.userInfo}));return Object(G.jsxs)("div",{children:[Object(G.jsxs)(ce.a,{children:[Object(G.jsx)(ae,{}),Object(G.jsxs)(se.c,{children:[Object(G.jsx)(se.a,{path:"/home",children:Object(G.jsxs)("div",{className:"startDiv",children:[Object(G.jsx)("h1",{children:"PlantApp"}),Object(G.jsx)("p",{children:"With plantapp you can set timer on your newly grown plants and add notes to them while they grow. You can also see other people's plants and chat with other users"})]})}),Object(G.jsx)(se.a,{path:"/about",component:X,children:Object(G.jsx)(X,{})}),Object(G.jsx)(se.a,{path:"/highscores",component:ee,children:Object(G.jsx)(ee,{})}),Object(G.jsx)(se.a,{path:"/chat",component:ie,children:Object(G.jsx)(ie,{})}),Object(G.jsx)(se.a,{path:"/myplants",component:oe,children:null===c?Object(G.jsx)("div",{className:"startDiv",children:Object(G.jsx)("p",{children:"To see your plants, please log in!"})}):Object(G.jsx)("div",{children:Object(G.jsx)(oe,{})})})]})]}),null===c?Object(G.jsx)("div",{children:Object(G.jsx)(V,{})}):Object(G.jsx)("div",{children:Object(G.jsx)(Z,{user:c.name})})]})};n(110);a.a.render(Object(G.jsx)(s.a,{store:H,children:Object(G.jsx)(ue,{})}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.c4e5ab80.chunk.js.map